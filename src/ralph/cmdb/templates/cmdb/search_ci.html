{%extends 'cmdb/base.html'%}
   
{% load icons %}
{% load bob %}
{% load query %}

{% block content %}
<style type="text/css" media="screen">
    form.form-inline select
    {
        width: auto;
    }

    #id_uid
    {
        width: 80px;
    }

</style>


    <form class="form-inline well">
    {% for f in form %}
            {{ f.label_tag }}
            {{ f }}
    {% endfor %}
        <button type="submit" class="btn btn-primary">{% icon 'fugue-funnel' %}&nbsp;Filter</button>
    </form>

<table class="table table-striped table-bordered table-condensed ">
    <thead><tr>

        {% spaceless %}

            {% include 'cmdb/column-header.html' with sortable=1 label='Name' name='uid' always=1 %}
            {% include 'cmdb/column-header.html' with sortable=1 label='Type' name='type' always=1 %}
            {% include 'cmdb/column-header.html' with label='Layer' name='layer' always=1 %}
            {% if layer == '1' %}
                {# Application #}
            {% elif layer == '2' %}
                {# Database #}
            {% elif layer == '3' %}
                {# Documentation/Procedures  #}
            {% elif layer == '4' %}
                {# Organization Unit/Support Group  #}
            {% elif layer == '5' %}
                {# Hardware #}
            {% elif layer == '6' %}
                {# Network #}
            {% elif layer == '7' %}
                {# Services #}
            {% elif layer == '8' %}
                {# Roles #}
            {% endif %}
            {% include 'cmdb/column-header.html' with label='Operations' name='operations' always=1%}

        {% endspaceless %}

    </tr></thead>
    <tbody>
        {% for d in rows %}
        <tr>
            <td>
                {% if d.count %}
                <a href="./search?parent={{ d.id|default:''}}"> 
                    <b><i class='fugue-icon {{ d.icon }}'></i> {{ d.name }} ({{ d.count }}) &gt;&gt;</b> </a>
                {% else %}
                <a href="./ci/view/{{ d.id|default:''}}"> <i class='fugue-icon {{ d.icon }}'></i> {{ d.name }} </a>
                {% endif %}

            </td>
            <td>
                {{ d.ci_type }}
            </td>
       
            <td>
                {{ d.layers }}
            </td>
            {% if layer == '1' %}
                {# Application #}
            {% elif layer == '2' %}
                {# Database #}
            {% elif layer == '3' %}
                {# Documentation/Procedures  #}
            {% elif layer == '4' %}
                {# Organization Unit/Support Group  #}
            {% elif layer == '5' %}
                {# Hardware #}
            {% elif layer == '6' %}
                {# Network #}
            {% elif layer == '7' %}
                {# Services #}
            {% elif layer == '8' %}
                {# Roles #}
            {% endif %}
            <td>
                {% if edit_configuration_item_info_generic_perm  %}
                    <a href="./ci/edit/{{ d.id|default:''}}?{{url_query.urlencode }}"> Edit </a> |
                {% endif %}

                {% if read_configuration_item_info_generic_perm  %}
                    <a href="./ci/view/{{ d.id|default:''}}?{{url_query.urlencode }}"> View</a>
                {% endif %}
            </td>
        </tr>
        {% endfor %}
    </tbody>
</table>
{% pagination page url_query=url_query show_all=0 show_csv=0 fugue_icons=1 %}
{% endblock %}
